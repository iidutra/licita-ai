{% load widget_tweaks %}
{# Filter bar â€” included by opportunity_list.html #}

{# Active filter chips #}
{% if active_filters %}
<div class="active-filters">
  {% for f in active_filters %}
  <span class="filter-chip">
    {{ f.label }}
    <a href="#" data-remove="{{ f.param }}" title="Remover filtro" aria-label="Remover filtro {{ f.label }}">&times;</a>
  </span>
  {% endfor %}
  <a href="{% url 'opportunities:list' %}" class="text-muted small ms-1" style="font-size:.7rem;">Limpar todos</a>
</div>
{% endif %}

{# Filter form #}
<div class="filter-bar">
  <form method="get" id="filter-form">
    <div class="row g-2 align-items-end">
      <div class="col-lg-3 col-md-4 col-12">
        <div class="input-group input-group-sm">
          <span class="input-group-text bg-white"><i class="bi bi-search text-muted"></i></span>
          {{ filter_form.q|add_class:"form-control form-control-sm border-start-0"|attr:"id:filter-q" }}
        </div>
      </div>
      <div class="col-lg col-md-2 col-6">
        {{ filter_form.status|add_class:"form-select form-select-sm" }}
      </div>
      <div class="col-lg col-md-2 col-6">
        {{ filter_form.modality|add_class:"form-select form-select-sm" }}
      </div>
      <div class="col-lg-1 col-md-1 col-4">
        {{ filter_form.uf|add_class:"form-select form-select-sm" }}
      </div>
      <div class="col-lg col-md-2 col-4">
        {{ filter_form.source|add_class:"form-select form-select-sm" }}
      </div>
      <div class="col-lg col-md-2 col-4">
        {{ filter_form.sort|add_class:"form-select form-select-sm" }}
      </div>
      <div class="col-lg-auto col-md-1 col-12">
        <button type="submit" class="btn btn-primary btn-sm w-100">
          <i class="bi bi-funnel me-1"></i><span class="d-none d-md-inline">Filtrar</span>
        </button>
      </div>
    </div>
  </form>
</div>
